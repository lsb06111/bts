<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<div class="modal fade" id="employeeAddModal2" tabindex="-1"
	aria-labelledby="employeeAddModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg">
		<div class="modal-content"
			style="border-radius: 16px; border: none; box-shadow: 0 4px 24px rgba(0, 0, 0, 0.15);">

			<!-- í—¤ë” -->
			<div class="modal-header"
				style="border: none; padding: 24px 24px 10px;">
				<div>
					<h5 class="modal-title" id="employeeAddModalLabel"
						style="font-weight: 700; color: #222;">ì‚¬ì› ì¶”ê°€</h5>
					<p style="font-size: 13px; color: #777; margin-top: 6px;">ìƒˆë¡œìš´
						ì§ì›ì˜ ì •ë³´ë¥¼ ì…ë ¥í•˜ì—¬ ëª©ë¡ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>
				</div>
				<button type="button" class="btn-close" data-bs-dismiss="modal"
					aria-label="Close"></button>
			</div>

			<!-- ë³¸ë¬¸ -->
			<div class="modal-body" style="padding: 0 24px 24px;">
				<form id="empAddForm">
					<div class="row g-3">
						<div class="col-md-6">
							<label class="form-label" style="font-weight: 600;">ID(email)</label>
							<input name="email" type="email" id="addEmailInput"
								class="form-control" placeholder="ì˜ˆ: hong@company.com"
								style="font-size: 14px;">
						</div>

						<div class="col-md-6">
							<label class="form-label" style="font-weight: 600;">ì´ë¦„</label> <input
								name="ename" type="text" id="addNameInput" class="form-control"
								placeholder="ì˜ˆ: í™ê¸¸ë™" style="font-size: 14px;">
						</div>

						<div class="col-md-6">
							<label class="form-label" style="font-weight: 600;">password</label>
							<input name="password" type="text" id="addPasswordInput"
								class="form-control" placeholder="ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸: ìƒë…„ì›”ì¼"
								style="font-size: 14px;">
						</div>

						<div class="col-md-6">
							<label class="form-label" style="font-weight: 600;">ì†Œì†</label><select
								name="company" id="addCompanyInput" class="form-select"
								style="font-size: 14px;">
								<option value="1">OTI</option>
								<option value="2">EXA</option>
								<option value="3">ETC</option>
							</select>
						</div>

						<div class="col-md-6">
							<label class="form-label" style="font-weight: 600;">ë‚´ì„ ë²ˆí˜¸</label>
							<input name="ephone" type="text" id="addEphoneInput"
								class="form-control" placeholder="ì˜ˆ: 1001"
								style="font-size: 14px;">
						</div>

						<div class="col-md-6">
							<label class="form-label" style="font-weight: 600;">íœ´ëŒ€ì „í™”</label>
							<input name="phone" type="text" id="addPhoneInput"
								class="form-control" placeholder="ì˜ˆ: 010-1234-5678"
								style="font-size: 14px;">
						</div>

						<div class="col-md-6">
							<label class="form-label" style="font-weight: 600;">ë¶€ì„œ</label> <select
								name="deptno" id="addDeptInput" class="form-select"
								style="font-size: 14px;">
								<option value="1">ê°œë°œíŒ€</option>
								<option value="2">ìš´ì˜íŒ€</option>
								<option value="3">ì¸ì‚¬íŒ€</option>
							</select>
						</div>

						<div class="col-md-3">
							<label class="form-label" style="font-weight: 600;">ì§ìœ„</label> <select
								name="jobno" id="addJobInput" class="form-select"
								style="font-size: 14px;">
								<option value="1">ì‚¬ì›</option>
								<option value="2">ì£¼ì„</option>
								<option value="3">ëŒ€ë¦¬</option>
								<option value="4">ê³¼ì¥</option>
								<option value="5">ì°¨ì¥</option>
								<option value="6">ë¶€ì¥</option>
							</select>
						</div>

						<div class="col-md-3">
							<label class="form-label" style="font-weight: 600;">ìƒíƒœ</label> <select
								name="estate" id="addEstateInput" class="form-select"
								style="font-size: 14px;">
								<option value="ì¬ì§ì¤‘">ì¬ì§ì¤‘</option>
								<option value="íœ´ì§">ì¶œì‚°íœ´ê°€</option>
								<option value="í‡´ì§">ìœ¡ì•„íœ´ì§</option>
								<option value="í‡´ì§">ì§ˆë³‘íœ´ì§</option>
								<option value="í‡´ì§">í‡´ì§</option>
							</select>
						</div>
					</div>
				</form>
			</div>

			<!-- í•˜ë‹¨ ë²„íŠ¼ -->
			<div class="modal-footer"
				style="border: none; padding: 16px 24px 24px;">
				<button type="button" class="btn btn-light" data-bs-dismiss="modal"
					style="border: 1px solid #ddd; color: #555; border-radius: 8px; font-size: 14px; padding: 8px 20px;">
					ì·¨ì†Œ</button>
				<button type="button" id="addUserBtn" class="btn"
					style="background-color: #4f46e5; color: #fff; border-radius: 8px; font-weight: 500; font-size: 14px; padding: 8px 20px;">
					ì¶”ê°€</button>
			</div>

		</div>
	</div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
	$(document).ready(
			function() {
				// ğŸ”¹ ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì‹œ
				$('#addUserBtn').on(
						'click',
						function() {
							if (!confirm('ì‚¬ì›ì„ ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?'))
								return;

							const userData = {
								email : $('#emailInput').val().trim(),
								password : $('#passwordInput').val().trim()
							};

							// í•„ìˆ˜ê°’ ê²€ì¦
							if (!userData.email || !userData.password) {
								alert('ì´ë©”ì¼, íŒ¨ìŠ¤ì›Œë“œëŠ” í•„ìˆ˜ ì…ë ¥ì…ë‹ˆë‹¤.');
								return;
							}

							$.ajax({
								url : '${pageContext.request.contextPath}/user/register',
								type : 'POST',
								data : $("#empForm").serialize(), // form ë‚´ìš© ëª¨ë‘ input ì „ì†¡
								success : function(response) {
									alert('ì‚¬ì›ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');

									// ëª¨ë‹¬ ë‹«ê¸° ë° ë°°ê²½ ì œê±°
									$('#employeeAddModal').modal('hide');
									$('.modal-backdrop').remove();
									$('body').removeClass('modal-open').css(
											'overflow', 'auto');

									// ëª©ë¡ìœ¼ë¡œ ì´ë™
									window.location.href = '${pageContext.request.contextPath}/emp/list2';
								},
								error : function() {
									alert('ì‚¬ì› ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
								}
							});
						});

			});
</script>
